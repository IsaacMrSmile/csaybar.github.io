<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Download the GLC30 product for Peru and Ecuador</title>
  <meta name="author" content="Cesar Aybar" />
  
  
  
  
  <meta name="keywords" content="devows, hugo, go, Google Earth Engine, python, folium">
  
  
  <meta name="description" content="Site template made by devcows using hugo">

  <meta name="generator" content="Hugo 0.59.1" />

  
  <link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">

  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="/css/animate.css" rel="stylesheet">

  
  
    <link href="/css/style.blue.css" rel="stylesheet" id="theme-stylesheet">
  

  
  <link href="/css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/img/apple-touch-icon.png" />

  
  <link href="/css/owl.carousel.css" rel="stylesheet">
  <link href="/css/owl.theme.css" rel="stylesheet">

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="csaybar">

  
  
  
  
  
  
  
  <meta property="og:locale" content="en_us">
  <meta property="og:site_name" content="csaybar">
  <meta property="og:title" content="Download the GLC30 product for Peru and Ecuador">
  <meta property="og:type" content="article">
  <meta property="og:url" content="/blog/2019/06/08/landuseperu.knit/" />
  <meta property="og:description" content="Site template made by devcows using hugo">
  <meta property="og:image" content="/img/sharing-default.png">
  <meta property="og:image:type" content="image/png">
  
  
  
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="420">
  
  
  <meta property="og:updated_time" content="2019-06-08T00:00:00Z">
  
    
    
    
    <meta property="article:tag" content="Google Earth Engine">
    <meta property="article:tag" content="python">
    <meta property="article:tag" content="folium">
    
    
    <meta property="article:published_time" content="2019-06-08T00:00:00Z">
    <meta property="article:modified_time" content="2019-06-08T00:00:00Z">
  

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@csaybar">
  <meta name="twitter:title" content="Download the GLC30 product for Peru and Ecuador">
  
  <meta name="twitter:image" content="/img/sharing-default.png">
  
  <meta name="twitter:description" content="Site template made by devcows using hugo">
  

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/">
                    <img src="/img/logo.svg" alt="Download the GLC30 product for Peru and Ecuador logo" class="hidden-xs hidden-sm" width="190">
                    <img src="/img/logo-small.svg" alt="Download the GLC30 product for Peru and Ecuador logo" class="visible-xs visible-sm" width="190">
                    <span class="sr-only">Download the GLC30 product for Peru and Ecuador - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  
                  
                  <li class="dropdown">
                    
                    <a href="/">Home</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/research/">research</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/software/">software</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/publications/">publications</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/teaching/">teaching</a>
                    
                  </li>
                  
                  
                  <li class="dropdown active">
                    
                    <a href="/blog/">Blog</a>
                    
                  </li>
                  
                  
                  <li class="dropdown">
                    
                    <a href="/contact/">Contact</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Download the GLC30 product for Peru and Ecuador</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-9" id="blog-post">

                        <p class="text-muted text-uppercase mb-small text-right">By <a href="#">Cesar Aybar</a> | June 8, 8069</p>

                        <div id="post-content">
                          

<p><center>
<a href="https://colab.research.google.com/github/csaybar/EEwPython/blob/master/GLC30.ipynb"><img align="left" src="https://colab.research.google.com/assets/colab-badge.svg" alt="Reproducible Example here" title="Open and Execute in Google Colaboratory"></a>
</center></p>

<p><br></p>

<p>Land Cover information is fundamental for environmental change studies, land resource management, sustainable development, and many other societal benefits. In <strong>Google Earth Engine</strong> existing different coarse Land use/cover products (e.g. MCD12Q1-500m) that are not able to capture the most significant human impacts on land systems due to its spatial resolution. Therefore, this short post aims to introduce and explain step by step how to download the <a href="https://reader.elsevier.com/reader/sd/pii/S0924271614002275?token=BF89D29031101CDB800927F3DA0DA572A4BBBA74220D9178A24F13A5140E629638CFA580F464F61E1500662B55B90A76">GLC30</a> a relative new Global Land Cover product at 30-meter spatial resolution.</p>

<p><center>
<img src='http://www.globallandcover.com/home/images/vegas.jpg'>
</center></p>

<h2 id="1-installing">1. Installing</h2>

<p>Before coding do not forget install and load the following packages and remenber that you can communicate with the bash console prepending an ! to the code.</p>

<pre><code class="language-python">!pip install geopandas #tensorflow 2.0
!pip install earthengine-api==0.1.175 #earthengine API
</code></pre>

<h2 id="2-authentification">2. Authentification</h2>

<p>This tutorial needs interacting with others Google services. For accomplish this task, it&rsquo;s necessary to authenticate (as yourself). The code below shows you how to do it.</p>

<ul>
<li><strong>Google Drive</strong></li>
</ul>

<p>We will use Google Drive for save us results.</p>

<pre><code class="language-python">from google.colab import drive
drive.mount('/content/drive')  
</code></pre>

<ul>
<li><p><strong>Authenticate to Earth Engine</strong></p>

<pre><code class="language-python">!earthengine authenticate 
</code></pre></li>
</ul>

<h2 id="3-testing-the-software-setup">3. Testing the software setup</h2>

<pre><code class="language-python"># Earth Engine Python API
import ee
ee.Initialize()

import folium
import geopandas as gpd

# Define the URL format used for Earth Engine generated map tiles.
EE_TILES = 'https://earthengine.googleapis.com/map/{mapid}/{{z}}/{{x}}/{{y}}?token={token}'

print('Folium version: ' + folium.__version__)
print('Geopandas version: ' + gpd.__version__)
</code></pre>

<h2 id="4-display-either-ee-image-or-ee-feature">4. Display either ee.Image or ee.Feature</h2>

<pre><code class="language-python">def Mapdisplay(center, dicc, Tiles=&quot;OpensTreetMap&quot;,zoom_start=10):
    '''
    :param center: Center of the map (Latitude and Longitude).
    :param dicc: Earth Engine Geometries or Tiles dictionary
    :param Tiles: Mapbox Bright,Mapbox Control Room,Stamen Terrain,Stamen Toner,stamenwatercolor,cartodbpositron.
    :zoom_start: Initial zoom level for the map.
    :return: A folium.Map object.
    '''
    mapViz = folium.Map(location=center,tiles=Tiles, zoom_start=zoom_start)
    for k,v in dicc.items():
      if ee.image.Image in [type(x) for x in v.values()]:
        folium.TileLayer(
            tiles = EE_TILES.format(**v),
            attr  = 'Google Earth Engine',
            overlay =True,
            name  = k
          ).add_to(mapViz)
      else:
        folium.GeoJson(
        data = v,
        name = k
          ).add_to(mapViz)
    mapViz.add_child(folium.LayerControl())
    return mapViz
</code></pre>

<h2 id="5-preparing-geometry-data-geopandas-to-ee">5. Preparing Geometry Data (Geopandas to EE)</h2>

<pre><code class="language-python">#download the geometry 
import urllib
url = 'https://github.com/csaybar/csaybar.github.io/raw/master/data/provinces.geojson'
urllib.request.urlretrieve(url, 'Peru.geojson')
</code></pre>

<pre><code class="language-python"># Reading the file
peruprov = gpd.read_file('Peru.geojson')
lima = peruprov[peruprov.NOMBRE == 'LIMA'].to_json() # Selecting Lima
lima_coords = eval(lima)['features'][0]['geometry']['coordinates'][0] #getting just the coordinates

# ee.Geometry -&gt; ee.Feature -&gt; ee.FeatureCollection
eeLima = ee.FeatureCollection([ee.Feature(ee.Geometry.Polygon(lima_coords),{'Name':'Lima'})])
</code></pre>

<pre><code class="language-python"># display the geometry using folium
center_lima = eeLima.geometry().centroid().getInfo()['coordinates']
center_lima.reverse()

fig =eeLima.draw(**{'color': 'FF0000', 'strokeWidth': 5}).getMapId()
Mapdisplay(center_lima,{'Lima':fig})
</code></pre>

<p><center>
<img src='https://raw.githubusercontent.com/csaybar/csaybar.github.io/master/img/vector.png'>
</center></p>

<h2 id="6-reading-and-clipping-the-glc30-dataset">6. Reading and clipping the GLC30 dataset</h2>

<pre><code class="language-python"># Remove 0 and 255 values (no data)
def removevalues(img):
  value_0 = img.neq(0)
  value_255 = img.neq(255)
  return img.updateMask(value_0).updateMask(value_255).divide(10).int()

# Define a palette for the distinct land cover classes.
glc30Palette = [
  'ff02d0', # 1-Cultaved Lands
  '147749', # 2-Forest    
  'a9d05f', # 3-Grassland  
  '3eb370', # 4-Shrublands
  '7ecef4', # 5-Wetlands
  '00569a', # 6-Water bodies          
  '6f6f6f',  # 7-Tundra
  '911818', # 8-Artificial Surfaces
  'cacaca', # 9-Bareland    
  'f9f3c1', # 10-Permanent snow and ice  
]

# Load the dataset
glc30_lima = ee.ImageCollection('users/csaybar/GLC30PERU')\
               .map(removevalues).max().clip(eeLima)

vizparams = {'min':1,'max':10,'palette':glc30Palette}
</code></pre>

<p><center>
<img src='https://raw.githubusercontent.com/csaybar/csaybar.github.io/master/img/landuse.png'>
</center></p>

<pre><code class="language-python"># Ecuador 
Ecuador = ee.Geometry.Polygon([[-79.25,0.10],[-79.25,0.47],[-79.76,0.47],[-79.76,0.10], [-79.25,0.10]])
center_ecu = Ecuador.centroid().getInfo()['coordinates']
center_ecu.reverse()
# Load the dataset
glc30_ecuador = ee.ImageCollection('users/csaybar/GLC30PERU')\
               .map(removevalues).max().clip(Ecuador)

vizparams = {'min':1,'max':10,'palette':glc30Palette}
Mapdisplay(center_ecu,{'glc30':glc30_ecuador.getMapId(vizparams)},zoom_start=10)
</code></pre>

<p><center>
<img src='https://raw.githubusercontent.com/csaybar/csaybar.github.io/master/img/landuse_01_ecuador.jpg'>
</center></p>

<h2 id="7-export-the-results-of-ee-to-google-drive">7. Export the results of EE to Google Drive</h2>

<pre><code class="language-python"># Export the image, specifying scale and region.
task = ee.batch.Export.image.toDrive(**{
    'image': glc30,
    'description': 'GLC30LIMA',
    'folder':'GLC30',
    'scale': 30,
    'region': eeLima.geometry().getInfo()['coordinates']
})
task.start()
</code></pre>

<p>Monitoring your Export</p>

<pre><code class="language-python">import time 
while task.active():
  print('Polling for task (id: {}).'.format(task.id))
  time.sleep(5)
</code></pre>

<pre><code class="language-python"># Export the image, specifying scale and region.
task = ee.batch.Export.image.toDrive(**{
    'image': glc30,
    'description': 'GLC30ECUADOR',
    'folder':'GLC30',
    'scale': 30,
    'region': Ecuador.getInfo()['coordinates']
})
task.start()
</code></pre>

                        </div>
                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "devcows" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        

<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
      <h3 class="panel-title">Search</h3>
    </div>

    <div class="panel-body">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" class="form-control" placeholder="Search">
                <input type="hidden" name="sitesearch" value="/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>







<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Categories</h3>
    </div>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            
            <li>
                <a href="/categories/lorem">lorem (1)</a>
            </li>
            
            <li>
                <a href="/categories/programming">programming (2)</a>
            </li>
            
            <li>
                <a href="/categories/pseudo">pseudo (1)</a>
            </li>
            
            <li>
                <a href="/categories/r">r (1)</a>
            </li>
            
            <li>
                <a href="/categories/starting">starting (1)</a>
            </li>
            
        </ul>
    </div>

</div>








<div class="panel sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            
            <li>
                <a href="/tags/folium"><i class="fas fa-tags"></i> folium</a>
            </li>
            
            <li>
                <a href="/tags/go"><i class="fas fa-tags"></i> go</a>
            </li>
            
            <li>
                <a href="/tags/golang"><i class="fas fa-tags"></i> golang</a>
            </li>
            
            <li>
                <a href="/tags/google-earth-engine"><i class="fas fa-tags"></i> google-earth-engine</a>
            </li>
            
            <li>
                <a href="/tags/hugo"><i class="fas fa-tags"></i> hugo</a>
            </li>
            
            <li>
                <a href="/tags/ipsum"><i class="fas fa-tags"></i> ipsum</a>
            </li>
            
            <li>
                <a href="/tags/plot"><i class="fas fa-tags"></i> plot</a>
            </li>
            
            <li>
                <a href="/tags/programming"><i class="fas fa-tags"></i> programming</a>
            </li>
            
            <li>
                <a href="/tags/python"><i class="fas fa-tags"></i> python</a>
            </li>
            
            <li>
                <a href="/tags/r-markdown"><i class="fas fa-tags"></i> r-markdown</a>
            </li>
            
            <li>
                <a href="/tags/regression"><i class="fas fa-tags"></i> regression</a>
            </li>
            
            <li>
                <a href="/tags/theme"><i class="fas fa-tags"></i> theme</a>
            </li>
            
        </ul>
    </div>

</div>






                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

        <footer id="footer">
    <div class="container">

        
        <div class="col-md-4 col-sm-6">
            <h4>About us</h4>

            Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        
        

        <div class="col-md-4 col-sm-6">

             
            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="/blog/2019/06/08/landuseperu/">
                          
                            <img src="/img/placeholder.png" class="img-responsive" alt="Download the GLC30 product for Peru and Ecuador">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="/blog/2019/06/08/landuseperu/">Download the GLC30 product for Peru and Ecuador</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="/blog/2019/06/08/landuseperu.knit/">
                          
                            <img src="/img/placeholder.png" class="img-responsive" alt="Download the GLC30 product for Peru and Ecuador">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="/blog/2019/06/08/landuseperu.knit/">Download the GLC30 product for Peru and Ecuador</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="image same-height-always">
                        <a href="/blog/2019/06/08/landuseperu.utf8/">
                          
                            <img src="/img/placeholder.png" class="img-responsive" alt="Download the GLC30 product for Peru and Ecuador">
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="/blog/2019/06/08/landuseperu.utf8/">Download the GLC30 product for Peru and Ecuador</a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg">
             

        </div>
        

        
        <div class="col-md-4 col-sm-6">

          <h4>Contact</h4>

            <strong>Lima</strong>
        <br>Ciudad Universitaria
        <br>Cercado de Lima 
        <br>15081
        <br>
        <strong>Peru</strong>

            <a href="/contact" class="btn btn-small btn-template-main">Go to contact page</a>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        
        

    </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-left">Copyright (c) 2019, Cesar Aybar Camacho; all rights reserved.</p>
            
            <p class="pull-right">
              Template by <a href="https://bootstrapious.com/p/universal-business-e-commerce-template">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>.
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyCFhtWLJcE30xOAjcbSFi-0fnoVmQZPb1Y&v=3.exp"></script>

<script src="/js/hpneo.gmaps.js"></script>
<script src="/js/gmaps.init.js"></script>
<script src="/js/front.js"></script>


<script src="/js/owl.carousel.min.js"></script>


  </body>
</html>
